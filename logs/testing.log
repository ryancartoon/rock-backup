
2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.056ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="backup_sources"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.111ms] [rows:2] SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "backup_sources" AND sql IS NOT NULL order by type = "table" desc

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.037ms] [rows:-] SELECT * FROM `backup_sources` LIMIT 1

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.034ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "backup_sources" AND name = "idx_backup_sources_deleted_at"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.026ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="repositories"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.078ms] [rows:2] SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "repositories" AND sql IS NOT NULL order by type = "table" desc

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.036ms] [rows:-] SELECT * FROM `repositories` LIMIT 1

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.029ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "repositories" AND name = "idx_repositories_deleted_at"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.025ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="policies"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.074ms] [rows:2] SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "policies" AND sql IS NOT NULL order by type = "table" desc

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.032ms] [rows:-] SELECT * FROM `policies` LIMIT 1

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.049ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type = "table" AND tbl_name = "policies" AND (sql LIKE "%CONSTRAINT \"fk_policies_backup_source\" %" OR sql LIKE "%CONSTRAINT fk_policies_backup_source %" OR sql LIKE "%CONSTRAINT `fk_policies_backup_source`%" OR sql LIKE "%CONSTRAINT [fk_policies_backup_source]%" OR sql LIKE "%CONSTRAINT 	fk_policies_backup_source	%")

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.036ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type = "table" AND tbl_name = "policies" AND (sql LIKE "%CONSTRAINT \"fk_policies_repository\" %" OR sql LIKE "%CONSTRAINT fk_policies_repository %" OR sql LIKE "%CONSTRAINT `fk_policies_repository`%" OR sql LIKE "%CONSTRAINT [fk_policies_repository]%" OR sql LIKE "%CONSTRAINT 	fk_policies_repository	%")

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.023ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "policies" AND name = "idx_policies_deleted_at"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.023ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="schedules"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.079ms] [rows:2] SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "schedules" AND sql IS NOT NULL order by type = "table" desc

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.031ms] [rows:-] SELECT * FROM `schedules` LIMIT 1

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.030ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "schedules" AND name = "idx_schedules_deleted_at"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.023ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="hosts"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.073ms] [rows:2] SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "hosts" AND sql IS NOT NULL order by type = "table" desc

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.027ms] [rows:-] SELECT * FROM `hosts` LIMIT 1

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.029ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "hosts" AND name = "idx_hosts_deleted_at"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.023ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type='table' AND name="jobs"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.073ms] [rows:2] SELECT sql FROM sqlite_master WHERE type IN ("table","index") AND tbl_name = "jobs" AND sql IS NOT NULL order by type = "table" desc

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.033ms] [rows:-] SELECT * FROM `jobs` LIMIT 1

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/db.go:27
[0.029ms] [rows:-] SELECT count(*) FROM sqlite_master WHERE type = "index" AND tbl_name = "jobs" AND name = "idx_jobs_deleted_at"

2024/04/21 17:51:07 /home/ryan/codes/rock-backup/backend/db/service.go:88
[0.417ms] [rows:10] SELECT schedules.id, schedules.policy_id, schedules.cron, schedules.start_time,
		schedules.duration, schedules.backup_type FROM `schedules` WHERE is_enabled=true

2024/04/21 17:52:12 /home/ryan/codes/rock-backup/backend/db/db.go:68
[0.422ms] [rows:1] SELECT `policies`.`id`,`policies`.`created_at`,`policies`.`updated_at`,`policies`.`deleted_at`,`policies`.`retention`,`policies`.`backup_source_id`,`policies`.`backup_source`,`policies`.`hostname`,`policies`.`status`,`policies`.`repository_id`,`policies`.`repository`,`policies`.`schedule_desc`,`BackupSource`.`id` AS `BackupSource__id`,`BackupSource`.`created_at` AS `BackupSource__created_at`,`BackupSource`.`updated_at` AS `BackupSource__updated_at`,`BackupSource`.`deleted_at` AS `BackupSource__deleted_at`,`BackupSource`.`source_type` AS `BackupSource__source_type`,`BackupSource`.`source_name` AS `BackupSource__source_name`,`BackupSource`.`source_path` AS `BackupSource__source_path`,`BackupSource`.`source_host_id` AS `BackupSource__source_host_id`,`BackupSource`.`last_scan_time` AS `BackupSource__last_scan_time` FROM `policies` LEFT JOIN `backup_sources` `BackupSource` ON `policies`.`backup_source_id` = `BackupSource`.`id` AND `BackupSource`.`deleted_at` IS NULL WHERE `policies`.`id` = 5 AND `policies`.`deleted_at` IS NULL ORDER BY `policies`.`id` LIMIT 1

2024/04/21 17:52:30 /home/ryan/codes/rock-backup/backend/db/db.go:84
[5.477ms] [rows:1] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`source_host_id`,`queue_time`,`start_time`,`end_time`,`status`,`hostname`,`repository_id`,`priority`,`in_schedule`,`operator`) VALUES ("2024-04-21 17:52:30.689","2024-04-21 17:52:30.689",NULL,0,"2024-04-21 17:52:10.871",NULL,NULL,"queued","host1",1,5,true,"backup scheduler") RETURNING `id`,`id`
RE `policies`.`id` = 5 AND `policies`.`deleted_at` IS NULL ORDER BY `policies`.`id` LIMIT 1

2024/04/21 16:57:22 /home/ryan/codes/rock-backup/backend/db/db.go:84 sql: converting argument $14 type: unsupported type repository.Repository, a struct
[0.178ms] [rows:0] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`source_host_id`,`queue_time`,`start_time`,`end_time`,`status`,`hostname`,`repository_id`,`priority`,`in_schedule`,`operator`,`repository`) VALUES ("2024-04-21 16:57:22.858","2024-04-21 16:57:22.858",NULL,0,"2024-04-21 16:56:58.209",NULL,NULL,"queued","host1",1,5,true,"backup scheduler","{{0 0001-01-01 00:00:00 +0000 UTC 0001-01-01 00:00:00 +0000 UTC {0001-01-01 00:00:00 +0000 UTC false}} 0  }") RETURNING `id`,`id`
1 10:58:00 /home/ryan/codes/rock-backup/backend/db/db.go:64
[4.758ms] [rows:1] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`queue_time`,`start_time`,`end_time`,`status`,`source_host_id`,`host_id`,`repository_id`,`priority`,`in_schedule`,`operator`) VALUES ("2024-04-21 10:58:00","2024-04-21 10:58:00",NULL,"2024-04-21 10:58:00",NULL,NULL,"queued",0,0,0,5,true,"backup scheduler") RETURNING `id`,`id`

2024/04/21 10:59:00 /home/ryan/codes/rock-backup/backend/db/db.go:64
[4.513ms] [rows:1] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`queue_time`,`start_time`,`end_time`,`status`,`source_host_id`,`host_id`,`repository_id`,`priority`,`in_schedule`,`operator`) VALUES ("2024-04-21 10:59:00","2024-04-21 10:59:00",NULL,"2024-04-21 10:59:00",NULL,NULL,"queued",0,0,0,5,true,"backup scheduler") RETURNING `id`,`id`

2024/04/21 11:00:00 /home/ryan/codes/rock-backup/backend/db/db.go:64
[5.049ms] [rows:1] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`queue_time`,`start_time`,`end_time`,`status`,`source_host_id`,`host_id`,`repository_id`,`priority`,`in_schedule`,`operator`) VALUES ("2024-04-21 11:00:00","2024-04-21 11:00:00",NULL,"2024-04-21 11:00:00",NULL,NULL,"queued",0,0,0,5,true,"backup scheduler") RETURNING `id`,`id`

2024/04/21 11:01:00 /home/ryan/codes/rock-backup/backend/db/db.go:64
[7.325ms] [rows:1] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`queue_time`,`start_time`,`end_time`,`status`,`source_host_id`,`host_id`,`repository_id`,`priority`,`in_schedule`,`operator`) VALUES ("2024-04-21 11:01:00","2024-04-21 11:01:00",NULL,"2024-04-21 11:01:00",NULL,NULL,"queued",0,0,0,5,true,"backup scheduler") RETURNING `id`,`id`

2024/04/21 11:02:00 /home/ryan/codes/rock-backup/backend/db/db.go:64
[5.720ms] [rows:1] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`queue_time`,`start_time`,`end_time`,`status`,`source_host_id`,`host_id`,`repository_id`,`priority`,`in_schedule`,`operator`) VALUES ("2024-04-21 11:02:00","2024-04-21 11:02:00",NULL,"2024-04-21 11:02:00",NULL,NULL,"queued",0,0,0,5,true,"backup scheduler") RETURNING `id`,`id`

2024/04/21 11:03:00 /home/ryan/codes/rock-backup/backend/db/db.go:64
[5.300ms] [rows:1] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`queue_time`,`start_time`,`end_time`,`status`,`source_host_id`,`host_id`,`repository_id`,`priority`,`in_schedule`,`operator`) VALUES ("2024-04-21 11:03:00","2024-04-21 11:03:00",NULL,"2024-04-21 11:03:00",NULL,NULL,"queued",0,0,0,5,true,"backup scheduler") RETURNING `id`,`id`

2024/04/21 11:04:00 /home/ryan/codes/rock-backup/backend/db/db.go:64
[4.356ms] [rows:1] INSERT INTO `jobs` (`created_at`,`updated_at`,`deleted_at`,`queue_time`,`start_time`,`end_time`,`status`,`source_host_id`,`host_id`,`repository_id`,`priority`,`in_schedule`,`operator`) VALUES ("2024-04-21 11:04:00","2024-04-21 11:04:00",NULL,"2024-04-21 11:04:00",NULL,NULL,"queued",0,0,0,5,true,"backup scheduler") RETURNING `id`,`id`
/codes/rock-backup/backend/db/service.go:64
[0.278ms] [rows:4] SELECT 
		backup_sources.id, 
		backup_sources.source_name,
		backup_sources.source_type,
		policies.id, 
		policies.retention,
		policies.status,
		policies.schedule_desc,
		hosts.name as hostname
		 FROM `policies` left join backup_sources on policies.backup_source_id = backup_sources.id left join hosts on policies.hostname = hosts.name

2024/04/17 20:53:30 /home/ryan/codes/rock-backup/backend/db/service.go:64
[0.213ms] [rows:4] SELECT 
		backup_sources.id, 
		backup_sources.source_name,
		backup_sources.source_type,
		policies.id, 
		policies.retention,
		policies.status,
		policies.schedule_desc,
		hosts.name as hostname
		 FROM `policies` left join backup_sources on policies.backup_source_id = backup_sources.id left join hosts on policies.hostname = hosts.name

2024/04/17 20:53:53 /home/ryan/codes/rock-backup/backend/db/service.go:64
[0.229ms] [rows:4] SELECT 
		backup_sources.id, 
		backup_sources.source_name,
		backup_sources.source_type,
		policies.id, 
		policies.retention,
		policies.status,
		policies.schedule_desc,
		hosts.name as hostname
		 FROM `policies` left join backup_sources on policies.backup_source_id = backup_sources.id left join hosts on policies.hostname = hosts.name

2024/04/17 20:57:32 /home/ryan/codes/rock-backup/backend/db/service.go:64
[0.204ms] [rows:4] SELECT 
		backup_sources.id, 
		backup_sources.source_name,
		backup_sources.source_type,
		policies.id, 
		policies.retention,
		policies.status,
		policies.schedule_desc,
		hosts.name as hostname
		 FROM `policies` left join backup_sources on policies.backup_source_id = backup_sources.id left join hosts on policies.hostname = hosts.name

2024/04/17 20:58:54 /home/ryan/codes/rock-backup/backend/db/service.go:64
[0.206ms] [rows:4] SELECT 
		backup_sources.id, 
		backup_sources.source_name,
		backup_sources.source_type,
		policies.id, 
		policies.retention,
		policies.status,
		policies.schedule_desc,
		hosts.name as hostname
		 FROM `policies` left join backup_sources on policies.backup_source_id = backup_sources.id left join hosts on policies.hostname = hosts.name

2024/04/17 21:08:44 /home/ryan/codes/rock-backup/backend/db/service.go:64
[0.214ms] [rows:4] SELECT 
		backup_sources.id, 
		backup_sources.source_name,
		backup_sources.source_type,
		policies.id, 
		policies.retention,
		policies.status,
		policies.schedule_desc,
		hosts.name as hostname
		 FROM `policies` left join backup_sources on policies.backup_source_id = backup_sources.id left join hosts on policies.hostname = hosts.name

2024/04/20 08:50:21 /home/ryan/codes/rock-backup/backend/db/service.go:64
[102.445ms] [rows:4] SELECT 
		backup_sources.id, 
		backup_sources.source_name,
		backup_sources.source_type,
		policies.id, 
		policies.retention,
		policies.status,
		policies.schedule_desc,
		hosts.name as hostname
		 FROM `policies` left join backup_sources on policies.backup_source_id = backup_sources.id left join hosts on policies.hostname = hosts.name

2024/04/20 08:54:14 /home/ryan/codes/rock-backup/backend/db/service.go:64
[0.223ms] [rows:4] SELECT 
		backup_sources.id, 
		backup_sources.source_name,
		backup_sources.source_type,
		policies.id, 
		policies.retention,
		policies.status,
		policies.schedule_desc,
		hosts.name as hostname
		 FROM `policies` left join backup_sources on policies.backup_source_id = backup_sources.id left join hosts on policies.hostname = hosts.name

2024/04/20 08:54:26 /home/ryan/codes/rock-backup/backend/db/service.go:18
[19.808ms] [rows:1] INSERT INTO `backup_sources` (`created_at`,`updated_at`,`deleted_at`,`source_type`,`source_name`,`source_path`,`source_host_id`,`last_scan_time`) VALUES ("2024-04-20 08:54:26.762","2024-04-20 08:54:26.762",NULL,"file","/source","/source",0,NULL) RETURNING `id`,`id`

2024/04/20 08:54:26 /home/ryan/codes/rock-backup/backend/db/service.go:22
[0.120ms] [rows:1] INSERT INTO `policies` (`created_at`,`updated_at`,`deleted_at`,`retention`,`backup_source_id`,`hostname`,`status`,`repository_id`,`schedule_desc`) VALUES ("2024-04-20 08:54:26.782","2024-04-20 08:54:26.782",NULL,1,0,"host1","serving",1,"") RETURNING `id`,`id`

2024/04/20 08:54:26 /home/ryan/codes/rock-backup/backend/db/service.go:30
[0.131ms] [rows:2] INSERT INTO `schedules` (`created_at`,`updated_at`,`deleted_at`,`policy_id`,`cron`,`start_time`,`duration`,`backup_type`,`description`) VALUES ("2024-04-20 08:54:26.782","2024-04-20 08:54:26.782",NULL,5,"54 08 1 * *","08:54:00",0,"",""),("2024-04-20 08:54:26.782","2024-04-20 08:54:26.782",NULL,5,"54 08 2,3,4,5,6,7 * *","08:54:00",0,"","") RETURNING `id`,`id`
